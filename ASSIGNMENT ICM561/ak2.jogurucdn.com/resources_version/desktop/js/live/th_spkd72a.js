var PROVIDER_WISE_PARTNERIZE_JSON={P_EX:{BR:{base_url:"https://prf.hn/click/camref:1100l3w7ir/destination:https://www.expedia.com.br",extra_params:""},AR:{base_url:"https://prf.hn/click/camref:1101l3w84P/destination:https://www.expedia.com.ar",extra_params:""},AU:{base_url:"https://prf.hn/click/camref:1101l3w84Q/destination:https://www.expedia.com.au",extra_params:""},VN:{base_url:"https://prf.hn/click/camref:1011l3w9FS/destination:https://www.expedia.com.vn",extra_params:""},HK:{base_url:"https://prf.hn/click/camref:1101l3w84V/destination:https://www.expedia.com.hk",extra_params:""},TW:{base_url:"https://prf.hn/click/camref:1011l3w9FR/destination:https://www.expedia.com.tw",extra_params:""},NO:{base_url:"https://prf.hn/click/camref:1011l3w9FH/destination:https://www.expedia.no",extra_params:""},AT:{base_url:"https://prf.hn/click/camref:1100l3w7iq/destination:https://www.expedia.at",extra_params:""},IN:{base_url:"https://prf.hn/click/camref:1101l3w854/destination:http://www.expedia.co.in",extra_params:""},JP:{base_url:"https://prf.hn/click/camref:1101l3w855/destination:http://www.expedia.co.jp",extra_params:""},MX:{base_url:"https://prf.hn/click/camref:1101l3w856/destination:https://www.expedia.mx",extra_params:""},TH:{base_url:"https://prf.hn/click/camref:1011l3w9FQ/destination:https://www.expedia.co.th",extra_params:""},ES:{base_url:"https://prf.hn/click/camref:1101l3w84S/destination:https://www.expedia.es",extra_params:""},FI:{base_url:"https://prf.hn/click/camref:1101l3w84T/destination:https://www.expedia.fi",extra_params:""},DE:{base_url:"https://prf.hn/click/camref:1100l3w7is/destination:https://www.expedia.de",extra_params:""},IE:{base_url:"https://prf.hn/click/camref:1011l3w9FG/destination:https://www.expedia.ie",extra_params:""},CN:{base_url:"https://prf.hn/click/camref:1011l3w9FE/destination:https://www.expedia.com/cn",extra_params:""},MY:{base_url:"https://prf.hn/click/camref:1101l3w857/destination:http://www.expedia.com.my",extra_params:""},SG:{base_url:"https://prf.hn/click/camref:1011l3w9j4/destination:http://www.expedia.com.sg",extra_params:""},NZ:{base_url:"https://prf.hn/click/camref:1100l3w7iw/destination:https://www.expedia.co.nz",extra_params:""},CA:{base_url:"https://prf.hn/click/camref:1100l3w6Ss/destination:https://www.expedia.ca",extra_params:""},IT:{base_url:"https://prf.hn/click/camref:1100l3w7iu/destination:https://www.expedia.it",extra_params:""},ID:{base_url:"https://prf.hn/click/camref:1100l3w7it/destination:https://www.expedia.co.id",extra_params:""},KR:{base_url:"https://prf.hn/click/camref:1100l3w7iv/destination:https://www.expedia.co.kr",extra_params:""},FR:{base_url:"https://prf.hn/click/camref:1101l3w84U/destination:https://www.expedia.fr",extra_params:""},CH:{base_url:"https://prf.hn/click/camref:1101l3w84R/destination:https://www.expedia.ch",extra_params:""},DK:{base_url:"https://prf.hn/click/camref:1011l3w9FF/destination:https://www.expedia.dk",extra_params:""},SE:{base_url:"https://prf.hn/click/camref:1101l3w858/destination:https://www.expedia.se",extra_params:""},PH:{base_url:"https://prf.hn/click/camref:1011l3w9FI/destination:http://www.expedia.com.ph",extra_params:""},GB:{base_url:"https://prf.hn/click/camref:1101l3w859/destination:https://www.expedia.co.uk",extra_params:""},US:{base_url:"https://prf.hn/click/camref:1101lBmcY/destination:https://www.expedia.com",extra_params:""}},P_HO:{SG:{base_url:"https://prf.hn/click/camref:1011l3w9FY/destination:http://sg.hotels.com",extra_params:"locale=en_SG&pos=HCOM_SG"},VN:{base_url:"https://prf.hn/click/camref:1100l3w7iY/destination:http://vi.hotels.com",extra_params:"locale=vi_VN&pos=HCOM_VN"},HK:{base_url:"https://prf.hn/click/camref:1011l3w9FW/destination:http://zh.hotels.com",extra_params:"locale=zh_HK&pos=HCOM_HK"},TW:{base_url:"https://prf.hn/click/camref:1011l3w9G8/destination:http://tw.hotels.com",extra_params:"locale=zh_TW&pos=HCOM_TW"},JP:{base_url:"https://prf.hn/click/camref:1100l3w7iL/destination:http://jp.hotels.com",extra_params:"locale=ja_JP&pos=HCOM_JP"},MX:{base_url:"https://prf.hn/click/camref:1100l3w7iV/destination:http://www.hoteles.com",extra_params:"locale=es_MX&amp;pos=HCOM_LATAM"},DK:{base_url:"https://prf.hn/click/camref:1100l3w7iH/destination:http://da.hotels.com",extra_params:"locale=da_DK&pos=HCOM_DK"},IT:{base_url:"https://prf.hn/click/camref:1101l3w85d/destination:http://it.hotels.com",extra_params:"locale=it_IT&pos=HCOM_IT"},GB:{base_url:"https://prf.hn/click/camref:1011l3w9G9/destination:http://uk.hotels.com",extra_params:"locale=en_GB&pos=HCOM_UK"},ID:{base_url:"https://prf.hn/click/camref:1100l3w7iK/destination:http://id.hotels.com",extra_params:"locale=in_ID&pos=HCOM_ID"},KR:{base_url:"https://prf.hn/click/camref:1011l3w9FZ/destination:https://kr.hotels.com",extra_params:"pos=HCOM_KR&locale=ko_KR"},AU:{base_url:"https://prf.hn/click/camref:1101l3w85b/destination:http://au.hotels.com",extra_params:"locale=en_AU&amp;amp;pos=HCOM_AU"},CA:{base_url:"https://prf.hn/click/camref:1011l3w9FU/destination:http://ca.hotels.com",extra_params:"locale=en_CA&amp;amp;pos=HCOM_CA"},BR:{base_url:"https://prf.hn/click/camref:1100l3w7iG/destination:http://www.hoteis.com",extra_params:"locale=pt_BR&pos=HCOM_BR"},ES:{base_url:"https://prf.hn/click/camref:1100l3w7iX/destination:http://es.hoteles.com",extra_params:"locale=es_ES&pos=HCOM_ES"},CH:{base_url:"https://prf.hn/click/camref:1101l3w85o/destination:http://de.hotels.com",extra_params:"locale=de_CH&pos=HCOM_CH"},DE:{base_url:"https://prf.hn/click/camref:1011l3w9FV/destination:https://de.hotels.com",extra_params:"locale=de_DE&amp;pos=HCOM_DE"},AT:{base_url:"https://prf.hn/click/camref:1100l3w7iF/destination:http://at.hotels.com",extra_params:"locale=de_AT&pos=HCOM_AT"},SE:{base_url:"https://prf.hn/click/camref:1101l3w85n/destination:http://sv.hotels.com",extra_params:"locale=sv_SE&pos=HCOM_SE"},IE:{base_url:"https://prf.hn/click/camref:1011l3w9FX/destination:http://ie.hotels.com",extra_params:"locale=en_IE&pos=HCOM_IE"},AR:{base_url:"https://prf.hn/click/camref:1100l3w7iM/destination:https://ar.hoteles.com",extra_params:"pos=HCOM_LATAM&locale=es_AR"},IS:{base_url:"https://prf.hn/click/camref:1011l3w9FT/destination:https://is.hotels.com",extra_params:"locale=is_IS&pos=HCOM_IS"},PH:{base_url:"https://prf.hn/click/camref:1101l3w85m/destination:http://ph.hotels.com",extra_params:"locale=en_PH&pos=HCOM_PH"},MS:{base_url:"https://prf.hn/click/camref:1100l3w7iU/destination:http://ms.hotels.com",extra_params:"locale=ms_MY&pos=HCOM_MY"},IN:{base_url:"https://prf.hn/click/camref:1101l3w85c/destination:http://in.hotels.com",extra_params:"locale=en_IN&pos=HCOM_IN"},TH:{base_url:"https://prf.hn/click/camref:1101l3w85p/destination:http://th.hotels.com",extra_params:"locale=th_TH&pos=HCOM_TH"},NZ:{base_url:"https://prf.hn/click/camref:1101l3w85k/destination:http://nz.hotels.com",extra_params:"locale=en_NZ&pos=HCOM_NZ"},NO:{base_url:"https://prf.hn/click/camref:1100l3w7iW/destination:http://no.hotels.com",extra_params:"locale=no_NO&pos=HCOM_NO"},FR:{base_url:"https://prf.hn/click/camref:1100l3w7iJ/destination:http://fr.hotels.com",extra_params:"locale=fr_FR&pos=HCOM_FR"},FI:{base_url:"https://prf.hn/click/camref:1100l3w7iI/destination:http://fi.hotels.com",extra_params:"locale=fi_FI&pos=HCOM_FI"},US:{base_url:"https://prf.hn/click/camref:1100lBkht/destination:https://www.hotels.com",extra_params:""}},H_HOMEAWAY:{IT:{base_url:"https://prf.hn/click/camref:1101l7QUs/destination:http://www.homeaway.it",extra_params:""},US:{base_url:"https://prf.hn/click/camref:1101l4ucB/destination:https://www.homeaway.com",extra_params:""},CA:{base_url:"https://prf.hn/click/camref:1011l7QJc/destination:https://www.homeaway.ca",extra_params:""},GB:{base_url:"https://prf.hn/click/camref:1101l4vpp/destination:http://www.homeaway.co.uk",extra_params:""}}};function makeBookingPopunder(e){if("Netscape"==navigator.appName&&navigator.appVersion.indexOf("Edge")>-1)return!1;var o,r={pUrl:null,redirect_to:joguru.ssl_base+"tripplanner",click_action_page:null,source_cookie:null,city_id:"",data_an_action:""};$.extend(r,e);var t=bookingPopunder.base64_encode(window.location.pathname),a=r.pUrl;null!=a&&(-1==a.indexOf("&http_referer_url=")&&(a=a+"&http_referer_url="+t),bookingPopunder.getCookie("country_code_by_ip"),bookingPopunder.getCookie("city_by_ip"),r.redirect_to=a);var n=r.click_action_page,s=r.redirect_to;a=null==a||void 0==a||""==a?joguru.ssl_base+"content/thBookingRedirect?action=blankPage&redirectTo="+encodeURIComponent(s)+"&http_referer_url="+t+"&source_cookie="+r.source_cookie+"&city_id="+r.city_id+"&action_log="+r.data_an_action:a;var c=top!=self&&"string"==typeof top.document.location.toString()?top:self,p="w"+Math.floor(1e6*Math.random()),d=window.innerWidth-6,l=window.innerHeight-6,u=-86400;u*=1e3;var g,k,h=(g=navigator.userAgent.toLowerCase(),(k={webkit:/webkit/.test(g),mozilla:/mozilla/.test(g)&&!/(compatible|webkit)/.test(g),chrome:/chrome/.test(g),msie:/msie/.test(g)&&!/opera/.test(g),firefox:/firefox/.test(g),safari:/safari/.test(g)&&!/chrome/.test(g),opera:/opera/.test(g)}).version=k.safari?(g.match(/.+(?:ri)[\\/: ]([\\d.]+)/)||[])[1]:(g.match(/.+(?:ox|me|ra|ie)[\\/: ]([\\d.]+)/)||[])[1],k);function f(){return -1!==document.cookie.indexOf("_.th_booking_popunder=")}function b(e,r,t,a,p,d){if(!f()&&("tripplanner"!=n||!h.webkit||!h.safari)){h.webkit&&h.safari&&(t=window.screen.height/2,a=window.screen.height,e=s);var l="toolbar=no,scrollbars=yes,location=yes,statusbar=yes,menubar=no,resizable=1,width="+t.toString()+",height="+a.toString()+",screenX="+p+",screenY="+d;if(f()||1==window.pop_clicked){(!1==h.webkit||!1==h.safari)&&o&&!1==o.closed&&(o.resizeTo(o.screen.width/2,o.screen.height),o.screenX=o.screen.width/2,o.screenY=0,o.offsetX=o.screen.width/2,o.offsetY=0,o.location.href=s);return}if(window.pop_clicked=1,o=c.window.open(e,r,l)){var u=new Date;u=new Date,function e(){try{var r,t,a;o.blur(),o.opener.window.focus(),window.self.window.blur(),window.focus(),h.firefox&&(r=window.open("about:blank"),r.focus(),r.close()),h.webkit&&(t=document.createElement("a"),t.href=joguru.ssl_base+"pop-under-booking.php?action=selfClose",t.target="PopHelper",document.getElementsByTagName("body")[0].appendChild(t),t.parentNode.removeChild(t),a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!0,!1,!1,!0,0,null),t.dispatchEvent(a),window.open(joguru.ssl_base+"pop-under-booking.php?action=selfClose","PopHelper").close())}catch(n){}}()}}}function m(){return s}!f()&&("H_AIR"==r.source_cookie?function e(r){var t={pUrl:null,pName:""};if($.extend(t,r),!f()&&("tripplanner"!=n||!h.webkit||!h.safari)){window.pop_clicked=1;var s="scrollbars=1, width=10, height=10, dialog=no, menubar=no, directories=no, left="+(screen.width+window.screenX)+", top="+screen.height+", status=no, toolbar=no";(o=c.window.open(t.pUrl,t.pName,s))?win_open_stack.open_win({url:a}):win_open_stack.open_win({url:a,win_block:!0})}}({pUrl:a,pName:p}):function e(r,t,a,s,p,d){if(!f()&&("tripplanner"!=n||!h.webkit||!h.safari)){if(h.webkit&&h.safari&&(a=window.screen.height/2,s=window.screen.height),window.pop_clicked=1,0!=window.blank_window.length)(o=window.blank_window.pop()).location.href=r;else{var l="scrollbars=1, width=10, height=10, dialog=no, menubar=no, directories=no, left="+(screen.width+window.screenX)+", top="+screen.height+", status=no, toolbar=no";(o=c.window.open(r,t,l))?win_open_stack.open_win({url:r}):win_open_stack.open_win({url:r,win_block:!0}),setTimeout(function(){try{o.resizeTo(1,0),o.moveTo(9999,9999)}catch(e){}},1)}}}(a,p,90,90,d,l))}var open_planner_fg=function(e){var o=document.createElement("form");e||(o.target="_blank"),o.method="POST",o.action=window.location.href;var r=document.createElement("input");r.type="hidden",r.name="timezoneoffset",r.value=new Date().getTimezoneOffset(),o.appendChild(r);var r=document.createElement("input");r.type="hidden",r.name="travel_start_date",r.value=$("#js_travel_start_date").val(),o.appendChild(r);var r=document.createElement("input");r.type="hidden",r.name="no_of_days",r.value=$("#js_no_of_days").val(),o.appendChild(r);var r=document.createElement("input");r.type="hidden",r.name="from_city_id",r.value=$("#from_city_id").val(),o.appendChild(r);var r=document.createElement("input");r.type="hidden",r.name="to_city_id",r.value=$("#to_city_id").val(),o.appendChild(r);var r=document.createElement("input");r.type="hidden",r.name="iti_step1_widget_utm_data",r.value=$("#iti_step1_widget_utm_data").val(),o.appendChild(r),document.body.appendChild(o),o.submit()};$(document).off("click",".js_th_spk_on_action_btn").on("click",".js_th_spk_on_action_btn",function(e){if("undefined"!=typeof global_place_object&&"id"in global_place_object&&global_place_object.id){var o=bookingPopunder.source({session_page:global_place_object.session_page,session_page_action:"on_action_btn"}),r="";if(o)switch(o){case"H_AIR":var t=bookingPopunder.convertExtraDataCookieValueToArr();if(void 0===t.referrer||t.referrer&&-1==t.referrer.indexOf("google"))return!1;void 0!==(r=bookingPopunder.prepareAirbnbUrl())&&r&&(bookingPopunder.appendCookieValue({source:o,session_page:global_place_object.session_page}),makeBookingPopunder({pUrl:r,source_cookie:o}));break;case"SKYSCAN":bookingPopunder.appendCookieValue({source:o,session_page:global_place_object.session_page}),makeBookingPopunder({redirect_to:bookingPopunder.prepareSkyscannerUrl(),source_cookie:o,city_id:global_place_object.id})}else bookingPopunder.pageClickPopunder(e)}}),$(document).off("click",".js_cleartrip_click").on("click",".js_cleartrip_click",function(e){if(modal.close(),modal.close(),"undefined"!=typeof global_place_object&&"id"in global_place_object&&global_place_object.id){var o=bookingPopunder.source({session_page:global_place_object.session_page,session_page_action:"on_action_btn"});bookingPopunder.appendCookieValue({source:o,session_page:global_place_object.session_page}),makeBookingPopunder({pUrl:joguru.ssl_base+"hotel_metasearch_redirection.php?callback=?&source_cookie="+o+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&session_page="+global_place_object.session_page})}}),$(document).off("click",".js_go_create").on("click",".js_go_create",function(e){setTimeout(function(){if(!popbox.prepareAndPostForm())return!1;modal.close(),modal.close()},1e3)}),$(document).off("click",".ok_got_it_q_fix").on("click",".ok_got_it_q_fix",function(e){$(e.target).get(0).hasAttribute("data-no-iti")&&window.open($(e.target).attr("href"),"_blank")}),$(document).off("click",".ok_got_it").on("click",".ok_got_it",function(e){if(("CITY_ITI"==global_place_object.session_page||"V_ITI"==global_place_object.session_page)&&""==$("#js_travel_start_date").val()&&!$(e.target).get(0).hasAttribute("data-not-req"))return $("#js_travel_start_date").parent("div.error-label-date").addClass("has-error"),bookingPopunder.pageClickPopunder(e,{allowed_page_click:!0}),!1;if((""==$("#travel_start_date").val()||""==$("#from_city_id").val()||""==$("#to_city_id").val())&&(""==$("#from_city_id").val()&&$("#from_city_id").val($("#to_city_id").val()),""==$("#to_city_id").val()))return $(".going-city-error").text("Going to City Missing"),!1;var o=bookingPopunder.findTragetObject(e),r=global_place_object.session_page,t=bookingPopunder.getCookie("country_code_by_ip"),a={};a.text="exit-place:"+$(e.target).data("action")+"-"+t,a.page="popunder-hotel",add_monitor_record(a);var n=!1;if((null==document.getElementById("city_exit_hotel_source_h_ar")||document.getElementById("city_exit_hotel_source_h_ar")&&document.getElementById("city_exit_hotel_source_h_ar").checked)&&(n=!0),!$(e.target).get(0).hasAttribute("data-no-iti")&&$("#new-itinerary-pop-box").length){if(!popbox.prepareAndPostForm())return!1;modal.close(),modal.close()}if($(e.target).get(0).hasAttribute("data-open-tab")&&"undefined"!=typeof global_place_object&&"id"in global_place_object&&global_place_object.id){var s=bookingPopunder.source({session_page:r,session_page_action:"open_curr_tab"});if(s){win_open_stack.track_action({text:o,source_cookie:s}),bookingPopunder.appendCookieValue({source:s,session_page:r});var c=$(".js_places_continue_to").data.url;if(void 0!==c&&c&&window.open(c,"_blank"),$(e.target).get(0).hasAttribute("data-no-iti")&&(void 0!==$(e.target).attr("href")?(window.open($(e.target).attr("href"),"_blank"),stopEvent(e)):window.open(window.location.href,"_blank")),"INTENT_MEDIA"==s){try{IntentMedia.get("should_open_in_new_tab"),IntentMedia.trigger("redirect_to_exit_unit"),win_open_stack.open_win({url:"IntentMedia"})}catch(p){}return!1}var d=bookingPopunder.prepareProvideURL({source_cookie:s});d&&void 0!==d&&(win_open_stack.open_win({url:d}),setTimeout(function(){window.location.href=d},1e3))}else modal.close(),modal.close()}}),$(document).off("click",".travel_step_frm_search").on("click",".travel_step_frm_search",function(e){var o=bookingPopunder.findTragetObject(e),r=global_place_object.session_page,t=$("#travel_step_frm");[].forEach.call(t.find(".has-error"),function(e){e.classList.remove("has-error")});var a=t.find("#travel_step_frm_check_in").val(),n=t.find("#travel_step_frm_check_out").val(),s=t.find("#travel_step_frm_adults").val(),c=t.find("#travel_step_frm_kids").val(),p=!1;if(a||(p=!0,$("#travel_step_frm_check_in").addClass("has-error")),n||(p=!0,$("#travel_step_frm_check_out").addClass("has-error")),""==s&&(p=!0,$(".js_travel_step_frm_adults_wrapper").addClass("has-error")),""==c&&(p=!0,$(".js_travel_step_frm_kids_wrapper").addClass("has-error")),p)return bookingPopunder.pageClickPopunder(e,{allowed_page_click:!0}),!1;if($(e.target).get(0).hasAttribute("data-open-tab")&&"undefined"!=typeof global_place_object&&"id"in global_place_object&&global_place_object.id){var d=bookingPopunder.source({session_page:r,session_page_action:"open_curr_tab"});if(d){var l=!1;(null==document.getElementById("allowed_provider")||document.getElementById("allowed_provider")&&document.getElementById("allowed_provider").checked)&&(l=!0),l||(d="H_BOOKING"),win_open_stack.track_action({text:o,source_cookie:d}),bookingPopunder.appendCookieValue({source:d,session_page:r});var u=window.location.href,g="";if($(e.target).get(0).hasAttribute("data-hotel-redirect")){for(g=joguru.base+"hotels/searchHotels/?check_in="+a+"&check_out="+n+"&no_of_room=1&no_of_adult[]="+s+"&no_of_children[]="+c+"&",void 0!==joguru.a_country&&joguru.a_country.indexOf(getCookie("country_code_by_ip"))>-1&&(g+="source=agoda&"),i=1;i<=c;i++)g+="children_age1[]=1&";if(g+="city_id="+global_place_object.id,void 0!==$("#htlCriteria").data("criteria")){var k=$("#htlCriteria").data("criteria");void 0!==k.sort_by&&(g=g+"&sort_by="+k.sort_by),void 0!==k.sort_dir&&(g=g+"&sort_dir="+k.sort_dir),void 0!==k.rating&&(g=g+"&rating="+k.rating)}"attraction"==$(e.target).attr("data-hotel-redirect")&&void 0!==$("#spl-autocomplete-search").data("attraction-id")&&(g+="&attractionId="+$("#spl-autocomplete-search").data("attraction-id")),window.open(g,"_blank")}else if("H_VIEW"==global_place_object.session_page){for(i=1,g=u.split("?")[0]+"?check_in="+a+"&check_out="+n+"&no_of_room=1&no_of_adult[]="+s+"&no_of_children[]="+c;i<=c;i++)g+="&children_age_0[]=1";window.open(g,"_blank")}else if("H_VACATION"==global_place_object.session_page){for(i=1,g=u.split("?")[0]+"?check_in="+a+"&check_out="+n+"&no_of_room=1&no_of_adult[]="+s+"&no_of_children[]="+c;i<=c;i++)g+="&children_age_0[]=1";window.open(g,"_blank")}else window.open(window.location.href,"_blank");var h=bookingPopunder.prepareProvideURL({source_cookie:d});h&&void 0!==h&&(h=h+"&checkin="+a+"&checkout="+n+"&adults="+s+"&children="+c,win_open_stack.open_win({url:h}),window.location.href=h)}else modal.close(),modal.close()}}),$(document).off("click",".js_places_continue_to").on("click",".js_places_continue_to",function(e){var o=bookingPopunder.findTragetObject(e),r=bookingPopunder.getCookie("country_code_by_ip"),t=global_place_object.session_page,a={};a.text="exit-place:"+$(e.target).data("action")+"-"+r,a.page="popunder-hotel",add_monitor_record(a);var n=!1;if((null==document.getElementById("city_exit_hotel_source_h_ar")||document.getElementById("city_exit_hotel_source_h_ar")&&document.getElementById("city_exit_hotel_source_h_ar").checked)&&(n=!0),"undefined"!=typeof global_place_object&&"id"in global_place_object&&global_place_object.id){var s=bookingPopunder.source({session_page:t,session_page_action:"open_curr_tab"});if("H_AIR"==s&&!1==n)return!1;if(s){win_open_stack.track_action({text:o,source_cookie:s}),bookingPopunder.appendCookieValue({source:s,session_page:t});var c=$(".js_places_continue_to").data.url;if(void 0!==c&&c?window.open(c,"_blank"):window.open(window.location.href,"_blank"),"INTENT_MEDIA"==s){try{win_open_stack.open_win({url:"IntentMedia"}),IntentMedia.get("should_open_in_new_tab"),IntentMedia.trigger("redirect_to_exit_unit")}catch(p){}return!1}var d=bookingPopunder.prepareProvideURL({source_cookie:s});d&&void 0!==d&&(win_open_stack.open_win({url:d}),window.location.href=d)}else modal.close(),modal.close()}else modal.close(),modal.close()}),$(document).off("click","#city_exit_hotel_source_h_ar").on("click","#city_exit_hotel_source_h_ar",function(){if(!(document.getElementById("city_exit_hotel_source_h_ar")?document.getElementById("city_exit_hotel_source_h_ar").checked:null)){var e=bookingPopunder.getCookie("country_code_by_ip"),o={};o.text="exit-place:uncheck_airbnb-"+e,o.page="popunder-hotel",add_monitor_record(o)}}),$(document).off("click","#hotel_source_h_ex, #hotel_source_vrbo").on("click","#hotel_source_h_ex, #hotel_source_vrbo",function(){if(!this.checked){var e={};e.text=global_place_object.session_page+":uncheck_"+$(this).val(),e.page="popunder-hotel",add_monitor_record(e)}}),$(document).off("click","#home_page_hotel_source_h_ar").on("click","#home_page_hotel_source_h_ar",function(){if(!this.checked){var e={};e.text="home-page:uncheck_airbnb",e.page="popunder-hotel",add_monitor_record(e)}}),$(document).on("js_extra_click",function(e){try{window.IntentMedia&&IntentMedia.trigger&&IntentMedia.trigger("open_exit_unit")}catch(o){}}),$(document).off("click",".js_open_intentmedia").on("click",".js_open_intentmedia",function(e){if($(e.target).get(0).hasAttribute("data-no-tab"))return!1;modal.close(),modal.close();var o=bookingPopunder.findTragetObject(e);win_open_stack.track_action({text:o,source_cookie:"INTENT_MEDIA"});try{win_open_stack.open_win({url:"IntentMedia"}),IntentMedia.get("should_open_in_new_tab");var r=window.location.href;void 0!==$(e.target).attr("href")&&"-1"!=$(e.target).attr("href").search("http")?r=$(e.target).attr("href"):void 0!==$(e.target).closest("a").attr("href")&&"-1"!=$(e.target).closest("a").attr("href").search("http")&&(r=$(e.target).closest("a").attr("href")),window.open(r,"_blank"),IntentMedia.trigger("redirect_to_exit_unit")}catch(t){}return $(e.target).get(0).hasAttribute("data-op-current-url")&&stopEvent(e),!1}),$(document).off("click",".js_close_th_spk_pop_drawer").on("click",".js_close_th_spk_pop_drawer",function(e){var o=$(this);$(this).parent().animate({marginLeft:"+=610px"},1e3,function(){o.parent().removeClass("side-drawer-ani")})}),$(document).off("click",'input[name="excluded_provider"]').on("click",'input[name="excluded_provider"]',function(){var e=$(this).val().trim();!0==$(this).prop("checked")?bookingPopunder.setExcludeProvider({remove:e}):bookingPopunder.setExcludeProvider({add:e})}),document.addEventListener("click",function(e){bookingPopunder.pageClickPopunder(e)});var bookingPopunder={default_source_arr:[],session_page_source_arr:{book_add_to_plan:["H_BOOKING"],hc_btn:["H_EX"]},source_cookie_arr:[],cookie_name:"pop_under_booking_source",not_allowed_utm_source:["adadmit"],airport:{source:["LHR","CDG","AMS","FRA","IST","MAD","BCN","LGW","MUC","FCO","SVO"],destinations:["JFK","MIA","LAX","EWR","ORD","ATL","SFO","IAH","IAD","DFW"]},randomNumber:function(e,o){return Math.floor(Math.random()*(o-e+1)+e)},getUtmString:function(){let e=null!=getCookie("utm_source")?getCookie("utm_source"):"",o=null!=getCookie("utm_medium")?getCookie("utm_medium"):"",r=null!=getCookie("utm_campaign")?getCookie("utm_campaign"):"";return"utm_source="+e+"&utm_medium="+o+"&utm_campaign="+r},getCookie:function(e){var o=document.cookie,r=o.indexOf(" "+e+"=");if(-1==r&&(r=o.indexOf(e+"=")),-1==r)o=null;else{r=o.indexOf("=",r)+1;var t=o.indexOf(";",r);-1==t&&(t=o.length),o=unescape(o.substring(r,t))}return o},createCookie:function(e){var o={name:"pop_under_booking_source",sec:864e5};$.extend(o,e);var r=o.name,t=o.value,a=o.sec,n=new Date;n.setTime(n.getTime()+a);var s="; expires="+n.toGMTString();document.cookie=r+"="+t+s+"; domain= "+joguru.cookie_domain+"; path=/"},appendCookieValue:function(e){var o={extra_data:{},source_arr:[]},r=bookingPopunder.convertCookieValueToArr();r&&(bookingPopunder.source_cookie_arr=r);var t=bookingPopunder.convertExtraDataCookieValueToArr();$.isEmptyObject(t)||(o.extra_data=t),bookingPopunder.source_cookie_arr.push(e.source+"|"+e.session_page+"|"+bookingPopunder.popUnderGetTimeStamp()),o.source_arr=bookingPopunder.source_cookie_arr;var a=bookingPopunder.base64_encode(JSON.stringify(o));bookingPopunder.createCookie({sec:864e5,value:a})},deleteCookieValue:function(e){var o={extra_data:{},source_arr:[]},r=bookingPopunder.convertCookieValueToArr();r&&(bookingPopunder.source_cookie_arr=r);var t=bookingPopunder.convertExtraDataCookieValueToArr();$.isEmptyObject(t)||(o.extra_data=t);var a=bookingPopunder.filterCookieValue().source.indexOf(e.source);if(a>-1){bookingPopunder.source_cookie_arr.splice(a,1),o.source_arr=bookingPopunder.source_cookie_arr;var n=bookingPopunder.base64_encode(JSON.stringify(o));bookingPopunder.createCookie({sec:864e5,value:n})}},convertCookieValueToArr:function(){var e=bookingPopunder.getCookie(bookingPopunder.cookie_name);if(null!=e){var o=$.parseJSON(bookingPopunder.base64_decode(e));if(void 0!==o.source_arr&&o.source_arr)return o.source_arr}return[]},appendExtraDataCookieValue:function(e){var o={extra_data:{},source_arr:[]},r=bookingPopunder.convertExtraDataCookieValueToArr();$.isEmptyObject(r)||(o.extra_data=r);var t=bookingPopunder.convertCookieValueToArr();t&&(o.source_arr=t),o.extra_data[e.name]=e.value;var a=bookingPopunder.base64_encode(JSON.stringify(o));bookingPopunder.createCookie({sec:864e5,value:a})},convertExtraDataCookieValueToArr:function(){var e=bookingPopunder.getCookie(bookingPopunder.cookie_name);if(null!=e)try{var o=$.parseJSON(bookingPopunder.base64_decode(e));if(void 0!==o.extra_data&&o.extra_data)return o.extra_data}catch(r){var t=bookingPopunder.base64_decode(e);if(t){var a={extra_data:{},source_arr:[]};a.source_arr=bookingPopunder.stringToArr(t);var n=bookingPopunder.base64_encode(JSON.stringify(a));bookingPopunder.createCookie({sec:864e5,value:n}),document.referrer&&-1==document.referrer.indexOf("triphobo")&&bookingPopunder.appendExtraDataCookieValue({name:"referrer",value:document.referrer})}}return{}},setExcludeProvider:function(e){var o={add:"",remove:""};$.extend(o,e);var r=bookingPopunder.convertExtraDataCookieValueToArr();void 0===r.exclude_provider&&(r.exclude_provider=[]),""!=o.add&&o.add?r.exclude_provider.push(o.add):""!=o.remove&&o.remove&&r.exclude_provider.splice($.inArray(o.remove,r.exclude_provider),1),r.exclude_provider.length&&(r.exclude_provider=Array.from(new Set(r.exclude_provider))),bookingPopunder.appendExtraDataCookieValue({name:"exclude_provider",value:r.exclude_provider})},filterCookieValue:function(){var e=bookingPopunder.convertCookieValueToArr(),o={source:[],session_page:[],timestamp:[]};return $.each(e,function(e,r){var t=r.split("|");o.source.push(t[0]),o.session_page.push(t[1]),o.timestamp.push(t[2])}),o},source:function(e){var o=bookingPopunder.getCookie(bookingPopunder.cookie_name);if(null!=o&&!RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$").test(o))return!1;var r=bookingPopunder.getUtmSource();if(r&&-1!=bookingPopunder.not_allowed_utm_source.indexOf(r))return!1;var t={source_arr:bookingPopunder.default_source_arr,now_allowed:[]};e&&"session_page_action"in e&&"provider"in global_place_object?e.source_arr=global_place_object.provider[e.session_page_action]:e&&"session_page"in e&&bookingPopunder.session_page_source_arr&&(e.source_arr=bookingPopunder.session_page_source_arr[e.session_page]),$.extend(t,e);var a=t.source_arr;document.getElementById("hotel_source_h_ex")&&!0!=document.getElementById("hotel_source_h_ex").checked&&-1!=a.indexOf("H_EX")&&(a.splice($.inArray("H_EX",a),1),bookingPopunder.appendCookieValue({source:"H_EX",session_page:e.session_page})),bookingPopunder.convertCookieValueToArr();var n=bookingPopunder.filterCookieValue(),s=bookingPopunder.convertExtraDataCookieValueToArr(),c=!1,p=n.source;n.session_page,n.timestamp,void 0!==s.exclude_provider&&(t.now_allowed=s.exclude_provider),void 0!==s.landing_page&&void 0===s.referrer&&("HOME_PAGE"==s.landing_page||"CR_ITI"==s.landing_page||"TRIP"==s.landing_page)&&-1!==a.indexOf("INTENT_MEDIA")&&(a=["INTENT_MEDIA"]);for(var d=0;d<=a.length-1;d++)if(-1==p.indexOf(a[d])){if(-1!==t.now_allowed.indexOf(a[d]))continue;c=a[d];break}return c&&"H_HOME"!=e.session_page&&(void 0!==s.landing_page&&void 0===s.referrer&&("HOME_PAGE"==s.landing_page||"CR_ITI"==s.landing_page||"TRIP"==s.landing_page)&&(c=!1),window.pop_clicked=0),c},popUnderGetTimeStamp:function(){return new Date().getTime()},arrToString:function(e){return e.join(", ")},stringToArr:function(e){return e.split(", ")},base64_decode:function(e){if("undefined"==typeof window)return new Buffer(e,"base64").toString("utf-8");if(void 0!==window.atob)return decodeURIComponent(unescape(window.atob(e)));var o,r,t,a,n,s,c,p,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,u=0,g="",k=[];if(!e)return e;e+="";do a=d.indexOf(e.charAt(l++)),n=d.indexOf(e.charAt(l++)),o=(p=a<<18|n<<12|(s=d.indexOf(e.charAt(l++)))<<6|(c=d.indexOf(e.charAt(l++))))>>16&255,r=p>>8&255,t=255&p,64===s?k[u++]=String.fromCharCode(o):64===c?k[u++]=String.fromCharCode(o,r):k[u++]=String.fromCharCode(o,r,t);while(l<e.length);return decodeURIComponent(escape((g=k.join("")).replace(/\0+$/,"")))},base64_encode:function(e){if("undefined"==typeof window)return new Buffer(e).toString("base64");if(void 0!==window.btoa)return window.btoa(decodeURIComponent(encodeURIComponent(e)));var o,r,t,a,n,s,c,p,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,u=0,g="",k=[];if(!e)return e;e=decodeURIComponent(encodeURIComponent(e));do o=e.charCodeAt(l++),a=(p=o<<16|(r=e.charCodeAt(l++))<<8|(t=e.charCodeAt(l++)))>>18&63,n=p>>12&63,s=p>>6&63,c=63&p,k[u++]=d.charAt(a)+d.charAt(n)+d.charAt(s)+d.charAt(c);while(l<e.length);g=k.join("");var h=e.length%3;return(h?g.slice(0,h-3):g)+"===".slice(h||3)},getUtmSource:function(){return getCookie("utm_source")},platform:function(){var e=navigator.userAgent.toLowerCase(),o="";return e.match("linux")?o="linux":e.match("macintosh|mac os")?o="mac":e.match("windows|win32|win64")&&(o="windows"),o}(),browser:function(){var e=navigator.userAgent.toLowerCase(),o={webkit:/webkit/.test(e),mozilla:/mozilla/.test(e)&&!/(compatible|webkit)/.test(e),chrome:/chrome/.test(e),msie:/msie/.test(e)&&!/opera/.test(e),firefox:/firefox/.test(e),safari:/safari/.test(e)&&!/chrome/.test(e),opera:/opera/.test(e)};return o.version=o.safari?(e.match(/.+(?:ri)[\\/: ]([\\d.]+)/)||[])[1]:(e.match(/.+(?:ox|me|ra|ie)[\\/: ]([\\d.]+)/)||[])[1],o}(),homePageAutoSelect:function(e){var o={id:"",name:"",country:"",type:"",page_name:""};if($.extend(o,e),"undefined"==typeof global_place_object||!global_place_object.session_page)return!1;if(o.id){if(global_place_object.id=o.id,o.name){global_place_object.name=o.name.toLowerCase();try{window.IntentMediaProperties.hotel_city=global_place_object.name,window.IntentMediaProperties.site_reporting_value_02=window.IntentMediaProperties.hotel_city,o.country?window.IntentMediaProperties.hotel_country=o.country.toLowerCase():window.IntentMediaProperties.hotel_country=""}catch(r){}}var t=bookingPopunder.source({session_page:global_place_object.session_page,session_page_action:"on_auto_select"});if(!0==bookingPopunder.browser.firefox&&1==global_place_object.multi_th_spk){if("INTENT_MEDIA"==t){bookingPopunder.appendCookieValue({source:t,session_page:global_place_object.session_page});try{window.IntentMedia&&IntentMedia.trigger&&(IntentMedia.trigger("open_exit_unit"),win_open_stack.open_win({url:"IntentMedia"}))}catch(a){}}else bookingPopunder.Multi({data_an_action:"",session_page_action:"on_auto_select",browser:"firefox"});return!1}if(t){if(win_open_stack.track_action({text:"autocomplete-select",source_cookie:t}),"INTENT_MEDIA"==t){bookingPopunder.appendCookieValue({source:t,session_page:global_place_object.session_page});try{window.IntentMedia&&IntentMedia.trigger&&(IntentMedia.trigger("open_exit_unit"),win_open_stack.open_win({url:"IntentMedia"}))}catch(n){}}else{bookingPopunder.appendCookieValue({source:t,session_page:global_place_object.session_page});var s=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+t+"&city_id="+o.id+"&session_page="+global_place_object.session_page;win_open_stack.open_win({url:s}),makeBookingPopunder({pUrl:s})}}}},currentDate:function(e){var o=new Date;void 0!==e&&o.setDate(o.getDate()+e);var r,t=o.getDate(),a=o.getMonth()+1;return t<10&&(t="0"+t),a<10&&(a="0"+a),{day:t,month:a,year:o.getFullYear()}},createItineraryFlightPopunder:function(e,o){var r={action:"",session_page:"ITI_STEP_FIRST"};if($.extend(r,o),global_place_object.session_page)var t=global_place_object.session_page;if($(e.target).hasClass("js_journey_start_date")&&"dayChanged"!=r.action)return!1;if(!0==bookingPopunder.browser.firefox&&1==global_place_object.multi_th_spk){if($("#itinerary_city_form").is(":visible")){var a=itinerary_app.city_planner_model.get("travelCities").at(0);void 0!=a&&(global_place_object.id=a.id,global_place_object.type="city",global_place_object.latitude=a.get("latitude"),global_place_object.longitude=a.get("longitude"),global_place_object.session_page=t,bookingPopunder.Multi({data_an_action:"",session_page_action:"on_auto_select",browser:"firefox"}))}}else{var n=bookingPopunder.source({session_page:t,session_page_action:"page"});if(n&&$("#itinerary_city_form").is(":visible")||n&&"V_ITI"==t){var a=itinerary_app.city_planner_model.get("travelCities").at(0);if(void 0!=a){if("H_EX"==n){global_place_object.provider.page=["H_EX","SKYSCAN"],bookingPopunder.appendCookieValue({source:n,session_page:t});var s=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+n+"&city_id="+a.id+"&latitude="+a.get("latitude")+"&longitude="+a.get("longitude")+"&session_page="+global_place_object.session_page;window.pop_clicked=0,makeBookingPopunder({pUrl:s})}else if("G_GUIDE"==n){bookingPopunder.appendCookieValue({source:n,session_page:t}),global_place_object.search_term="paris+france";var c="https://www.getyourguide.com/s/?partner_id=S7RCX99&q="+global_place_object.search_term+"&customerSearch=true&cmp=T1",p=a.toJSON();global_place_object.search_term=p.name,makeBookingPopunder({redirect_to:c,source_cookie:n,city_id:p.city_id,data_an_action:r.data_an_action})}else if("SKYSCAN"==n){var d=a.get("route").toJSON(),l="";try{var u=d.routes.segments,l=u[0].departure_date,l=l.split(" ")[0]}catch(g){var k=bookingPopunder.currentDate(),l=k.year+"-"+k.month+"-"+k.day}if(l){if("routes"in d&&"flight"==d.routes.displayTravelMode){if(bookingPopunder.appendCookieValue({source:n,session_page:t}),"iata"in u[0])var h=u[0].iata;else var h=bookingPopunder.airport.source[Math.floor(Math.random()*bookingPopunder.airport.source.length)];if("iata"in u[1])var f=u[1].iata;else var f=bookingPopunder.airport.destinations[Math.floor(Math.random()*bookingPopunder.airport.destinations.length)];var b="http://partners.api.skyscanner.net/apiservices/referral/v1.0/"+bookingPopunder.getCookie("country_code_by_ip")+"/"+bookingPopunder.getCookie("currency")+"/en-"+bookingPopunder.getCookie("country_code_by_ip")+"/"+h+"/"+f+"/"+l+"/?apiKey=jo88558229553945";window.pop_clicked=0,makeBookingPopunder({redirect_to:b,source_cookie:n})}else{var h=bookingPopunder.airport.source[Math.floor(Math.random()*bookingPopunder.airport.source.length)],f=bookingPopunder.airport.destinations[Math.floor(Math.random()*bookingPopunder.airport.destinations.length)];bookingPopunder.appendCookieValue({source:n,session_page:t});var b="http://partners.api.skyscanner.net/apiservices/referral/v1.0/"+bookingPopunder.getCookie("country_code_by_ip")+"/"+bookingPopunder.getCookie("currency")+"/en-"+bookingPopunder.getCookie("country_code_by_ip")+"/"+h+"/"+f+"/"+l+"/?apiKey=jo88558229553945";window.pop_clicked=0,makeBookingPopunder({redirect_to:b,source_cookie:n})}}}}}}},openMultiplePopunder:function(e){var o={data_an_action:"",allowed_to_vrbo:"NO"};$.extend(o,e);var r=bookingPopunder.prepareMultiplePopunderSourceArr(),t=global_place_object.session_page,a="page";-1!=["HOME_PAGE","CR_ITI"].indexOf(t)&&(a="on_auto_select");for(var n=0;n<=r.length-1;n++){var s=bookingPopunder.source({session_page:t,session_page_action:a});if(s){bookingPopunder.appendCookieValue({source:s,session_page:t});var c="";if("H_EX"==s){var c=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+s+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&action_log="+o.data_an_action+"&allowed_to_vrbo="+o.allowed_to_vrbo+"&session_page="+global_place_object.session_page;makeBookingPopunder({pUrl:c+"&"+bookingPopunder.getUtmString()})}else if("SKYSCAN"==s){var p=bookingPopunder.prepareSkyscannerUrl();makeBookingPopunder({redirect_to:p,source_cookie:s,city_id:global_place_object.id,data_an_action:o.data_an_action})}else if("MUSEMENT"==s){global_place_object.search_term||(global_place_object.search_term=global_place_object.name);var p="https://www.musement.com/us/search?q="+global_place_object.search_term+"&aid=triphobo&cmp=T2";makeBookingPopunder({redirect_to:p,source_cookie:s,city_id:global_place_object.id,data_an_action:o.data_an_action})}else if("H_VRBO"==s)makeBookingPopunder({redirect_to:bookingPopunder.prepareVRBOUrl(),source_cookie:s,city_id:global_place_object.id,data_an_action:o.data_an_action});else if("P_EX"==s)makeBookingPopunder({redirect_to:bookingPopunder.prepareVRBOUrl(),source_cookie:s,city_id:global_place_object.id,data_an_action:o.data_an_action});else if("P_HO"==s)makeBookingPopunder({redirect_to:bookingPopunder.prepareVRBOUrl(),source_cookie:s,city_id:global_place_object.id,data_an_action:o.data_an_action});else if("G_GUIDE"==s){global_place_object.search_term="paris+france";var p="https://www.getyourguide.com/s/?partner_id=S7RCX99&q="+global_place_object.search_term+"&customerSearch=true&cmp=T1";makeBookingPopunder({redirect_to:p,source_cookie:s,city_id:global_place_object.id,data_an_action:o.data_an_action})}else if("H_AIR"==s||"H_BOOKING"==s||"H_PRI"==s){var c=joguru.ssl_base+"hotel_metasearch_redirection.php?callback=?&source_cookie="+s+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&action_log="+o.data_an_action+"&session_page="+global_place_object.session_page;makeBookingPopunder({pUrl:c+"&"+bookingPopunder.getUtmString()})}}}},prepareMultiplePopunderSourceArr:function(){var e=global_place_object.session_page,o="page";if(-1!=["HOME_PAGE","CR_ITI"].indexOf(e)&&(o="on_auto_select"),void 0!==global_place_object.provider[o]&&global_place_object.provider[o]&&1==global_place_object.provider[o].indexOf("H_AIR"))var r=global_place_object.provider[o]=["H_EX","H_AIR","SKYSCAN"];else var r=global_place_object.provider[o]=["H_EX","SKYSCAN"];var t=bookingPopunder.getCookie("country_code_by_ip");if("IT"==t)var r=global_place_object.provider[o]=["H_EX","SKYSCAN","MUSEMENT"];else if("US"==t)var r=global_place_object.provider[o]=["H_EX","SKYSCAN"];if("TR"==e&&"IT"!=t)var r=global_place_object.provider[o]=["H_EX","SKYSCAN","G_GUIDE"];return r},Multi:function(e){var o=bookingPopunder.base64_encode(window.location.pathname),r={data_an_action:"",browser:"",session_page_action:"page"};$.extend(r,e);for(var t=1;t<=2;t++){var a=bookingPopunder.source({session_page:global_place_object.session_page,session_page_action:r.session_page_action,now_allowed:["INTENT_MEDIA"]});if(a&&"INTENT_MEDIA"!=a){win_open_stack.track_action({text:r.data_an_action,source_cookie:a}),bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page});var n=redirect_url="";switch(a){case"G_GUIDE":redirect_url=bookingPopunder.prepareGYG();break;case"H_AIR":(void 0===(n=redirect_url=bookingPopunder.prepareAirbnbUrl())||!1==n)&&"US"==bookingPopunder.getCookie("country_code_by_ip")&&(redirect_url="",a="EXP",n=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+a+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&action_log="+r.data_an_action+"&session_page="+global_place_object.session_page+"&http_referer_url="+o);break;case"SKYSCAN":n=redirect_url=bookingPopunder.prepareSkyscannerUrl();break;case"H_AGODA":n=bookingPopunder.prepareProvideURL({source_cookie:a});break;case"H_HOMEAWAY":case"H_VRBO":case"H_FEWO_DIREKT":case"H_ABRITEL":case"P_EX":case"P_HO":n=redirect_url=bookingPopunder.prepareHOMEAWAYBrandUrl({source:a});break;case"EXP":case"H_EX":case"EXPEDIA":case"H_PRI":case"H_BOOKING":case"GAR":case"OLO":case"LRM":case"EBX":case"WTF":case"H_VIA":case"H_HC":n=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+a+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&action_log="+r.data_an_action+"&session_page="+global_place_object.session_page+"&http_referer_url="+o+"&"+bookingPopunder.getUtmString()}"H_AIR"==a&&redirect_url?n=redirect_url:redirect_url&&(n=joguru.ssl_base+"content/thBookingRedirect?action=blankPage&redirectTo="+encodeURIComponent(redirect_url)+"&http_referer_url="+o+"&source_cookie="+a+"&city_id="+global_place_object.id+"&action_log="+r.data_an_action);var s="w"+Math.floor(1e6*Math.random());if(n){if("chrome"==r.browser){var c={method:"open",url:n,name:s,options:{scrollbars:1,location:1,statusbar:1,menubar:0,resizable:1,scrollbars:1,statusbar:1,left:screen.width+window.screenX,top:screen.height,width:10,height:10},source_cookie:a};window.postMessage(c,window.location.origin)}else if("firefox"==r.browser){var p="scrollbars=1, width=10, height=10, dialog=no, menubar=no, directories=no, left="+(screen.width+window.screenX)+", top="+screen.height+", status=no, toolbar=no",d=window.open(n,s,p);d?win_open_stack.open_win({url:n}):(win_open_stack.open_win({url:n,win_block:!0,multi_win_block:!0}),bookingPopunder.deleteCookieValue({source:a}),bookingPopunder.appendExtraDataCookieValue({name:"multi_chrome_window",value:0})),setTimeout(function(){try{d.resizeTo(1,0),d.moveTo(9999,9999)}catch(e){}},1)}}}}},edgePopunder:function(e){var o={data_an_action:"",browser:"",session_page_action:"page"};$.extend(o,e);var r=bookingPopunder.source({session_page:global_place_object.session_page,session_page_action:o.session_page_action});if(r){if(win_open_stack.track_action({text:o.data_an_action,source_cookie:r}),bookingPopunder.appendCookieValue({source:r,session_page:global_place_object.session_page}),"INTENT_MEDIA"==r){try{window.IntentMedia&&IntentMedia.trigger&&(IntentMedia.trigger("open_exit_unit"),win_open_stack.open_win({url:"IntentMedia"}))}catch(t){}return!1}var a=bookingPopunder.prepareProvideURL({source_cookie:r});if(a&&void 0!==a){var n="scrollbars=1, width=10, height=10, dialog=no, menubar=no, directories=no, left="+(screen.width+window.screenX)+", top="+screen.height+", status=no, toolbar=no",s=window.open("about:blank","w"+Math.floor(1e6*Math.random()),n);s?(win_open_stack.open_win({url:a}),s.location.href=a):win_open_stack.open_win({url:a,win_block:!0}),setTimeout(function(){try{s.resizeTo(1,0),s.moveTo(9999,9999)}catch(e){}},1)}}},findTragetObject:function(e){if(!e)return!1;var o=$(e.target).data("anAction"),r=!1;if(void 0!==o)return o;switch(e.target.nodeName){case"INPUT":r="textbox";break;case"SELECT":r="selected+"+e.target.options[e.target.selectedIndex].text.trim();break;case"BUTTON":r=e.target.text?"button-"+e.target.text.trim():"button";break;default:r=!!e.target.text&&"text-"+e.target.text.trim()}return r},openBlankWindow:function(e){var o=!1;if(void 0===global_place_object.allowed_to_resize||!0!=global_place_object.allowed_to_resize||-1!=["HOME_PAGE","CR_ITI"].indexOf(global_place_object.session_page)&&"spl-autocomplete-search"!=$(e.target).attr("id"))return!1;if(!0==bookingPopunder.browser.firefox||!0==bookingPopunder.browser.safari){var r=bookingPopunder.prepareMultiplePopunderSourceArr(),t=bookingPopunder.filterCookieValue();if(r.length&&0==window.blank_window.length){for(var a=0;a<=r.length-1;a++)if(window.blank_window.length==a&&-1==t.source.indexOf(r[a])){var n="w"+Math.floor(1e6*Math.random()),s=window.open("about:blank",n,"scrollbars=1, width=10, height=10, dialog=no, menubar=no, directories=no, left="+(screen.width+window.screenX)+", top="+screen.height+", status=no, toolbar=no");setTimeout(function(){try{s.resizeTo(1,0),s.moveTo(9999,9999)}catch(e){}},1),window.blank_window.push(s),o=!0}}}else for(var c=["on_auto_select","page"],a=0;a<=c.length-1;a++)if(bookingPopunder.source({session_page:global_place_object.session_page,session_page_action:c[a]})&&0==window.blank_window.length){var n="w"+Math.floor(1e6*Math.random()),s=window.open("about:blank",n,"scrollbars=1, width=10, height=10, dialog=no, menubar=no, directories=no, left="+(screen.width+window.screenX)+", top="+screen.height+", status=no, toolbar=no");setTimeout(function(){try{s.resizeTo(1,0),s.moveTo(9999,9999)}catch(e){}},1),window.blank_window.push(s),o=!0}return o},prepareVRBOUrl:function(){var e=bookingPopunder.randomNumber(7,60),o=bookingPopunder.currentDate(e),r=o.year+"-"+o.month+"-"+o.day,t=bookingPopunder.currentDate(e+2),a=t.year+"-"+t.month+"-"+t.day;return"https://prf.hn/click/camref:1101l4vpf/destination:https://www.vrbo.com/search?destination="+global_place_object.name+"&adults="+bookingPopunder.randomNumber(1,3)+"&startDate="+r+"&endDate="+a},prepareHOMEAWAYBrandUrl:function(e){var o={source:""};$.extend(o,e);var r=bookingPopunder.randomNumber(7,60),t="",a=bookingPopunder.currentDate(r),n=a.year+"-"+a.month+"-"+a.day,s=bookingPopunder.currentDate(r+2),c=s.year+"-"+s.month+"-"+s.day,p=bookingPopunder.getCookie("country_code_by_ip");switch(console.log("options.source",o.source),o.source){case"H_HOMEAWAY":var d="https://prf.hn/click/camref:1101l4ucB/destination:https://www.homeaway.com";void 0!==PROVIDER_WISE_PARTNERIZE_JSON.H_HOMEAWAY[p]&&(d=PROVIDER_WISE_PARTNERIZE_JSON.H_HOMEAWAY[p].base_url),t=d+"/results/keywords:"+global_place_object.name+"/arrival:"+n+"/departure:"+c+"/minSleeps/"+bookingPopunder.randomNumber(1,3);break;case"H_VRBO":t="https://prf.hn/click/camref:1101l4vpf/destination:https://www.vrbo.com/search?destination="+global_place_object.name+"&adults="+bookingPopunder.randomNumber(1,3)+"&startDate="+n+"&endDate="+c+"&my_ad=AFF.VRBO-US.DIRECT.PHG.1100l12915";break;case"P_EX":var d="https://prf.hn/click/camref:1101lBmcY/destination:https://www.expedia.com";void 0!==PROVIDER_WISE_PARTNERIZE_JSON.P_EX[p]&&(d=PROVIDER_WISE_PARTNERIZE_JSON.P_EX[p].base_url),t=d+"/Hotel-Search?destination="+global_place_object.name+"&adults="+bookingPopunder.randomNumber(1,3)+"&startDate="+n+"&endDate="+c+"&flexibility=0_DAY&sort=RECOMMENDED&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude;break;case"P_HO":var d="https://prf.hn/click/camref:1100lBkht/destination:https://www.hotels.com";void 0!==PROVIDER_WISE_PARTNERIZE_JSON.P_HO[p]&&(d=PROVIDER_WISE_PARTNERIZE_JSON.P_HO[p].base_url),t=d+"/Hotel-Search?adults="+bookingPopunder.randomNumber(1,3)+"&destination="+global_place_object.name+"&startDate="+n+"&endDate="+c+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude;break;case"H_FEWO_DIREKT":t="https://prf.hn/click/camref:1100l7R92/destination:https://www.fewo-direkt.de";break;case"H_ABRITEL":t="https://prf.hn/click/camref:1011l7QJd/destination:https://www.abritel.fr"}return("P_HO"==o.source||"P_EX"==o.source||"H_HOMEAWAY"==o.source)&&void 0!==PROVIDER_WISE_PARTNERIZE_JSON[o.source][p]&&void 0!==PROVIDER_WISE_PARTNERIZE_JSON[o.source][p].extra_params&&PROVIDER_WISE_PARTNERIZE_JSON.P_HO[p].extra_params.length>2&&(t+="&"+PROVIDER_WISE_PARTNERIZE_JSON.P_HO[p].extra_params),t},prepareAirbnbUrl:function(){var e=$($(".airbnb-lister ul li")[0]).find("a").attr("href");return"airbnb_link"in global_place_object&&global_place_object.airbnb_link&&(e=global_place_object.airbnb_link),e},prepareGYG:function(){return"https://www.getyourguide.com/s/?partner_id=S7RCX99&q="+global_place_object.search_term+"&customerSearch=true&cmp=T1"},prepareSkyscannerUrl:function(){var e=bookingPopunder.airport.source[Math.floor(Math.random()*bookingPopunder.airport.source.length)],o=bookingPopunder.airport.destinations[Math.floor(Math.random()*bookingPopunder.airport.destinations.length)],r=bookingPopunder.randomNumber(30,60),t=bookingPopunder.currentDate(r),a=t.year+"-"+t.month+"-"+t.day;return"http://partners.api.skyscanner.net/apiservices/referral/v1.0/"+bookingPopunder.getCookie("country_code_by_ip")+"/"+bookingPopunder.getCookie("currency")+"/en-"+bookingPopunder.getCookie("country_code_by_ip")+"/"+e+"/"+o+"/"+a+"/?apiKey=jo88558229553945"},pageClickPopunder:function(e,o){var r={allowed_page_click:!1};if($.extend(r,o),e&&$(e.target).get(0).hasAttribute("href")&&$(e.target).get(0).hasAttribute("target")||e&&void 0!==$(e.target).closest("a").attr("href")&&void 0!==$(e.target).closest("a").attr("target")||e&&$(e.target).get(0).hasAttribute("data-no-pu")||e&&$(e.target).parents("[data-no-pu-parent]").length)return!0;if(e&&!1==r.allowed_page_click&&($(e.target).hasClass("ok_got_it")||$(e.target).hasClass("js_places_continue_to")||$(e.target).hasClass("js-popup-check-box")||$(e.target).hasClass("travel_step_frm_search")))return!1;var t=bookingPopunder.findTragetObject(e);if(e&&$(e.target).get(0).hasAttribute("data-single-pu")&&$(e.target).get(0).setAttribute("data-no-pu",""),"undefined"!=typeof global_place_object&&"id"in global_place_object&&global_place_object.id){if("V_ITI"==global_place_object.session_page&&e&&e.target&&"js_iti_view_action_drawer"==$(e.target).attr("id"))return!1;var a=bookingPopunder.source({session_page:global_place_object.session_page,session_page_action:"page"}),n=bookingPopunder.getCookie("country_code_by_ip");if("Netscape"==navigator.appName&&navigator.appVersion.indexOf("Edge")>-1)return bookingPopunder.edgePopunder({data_an_action:t}),!1;if("IN"!=n&&"INTENT_MEDIA"!=a&&1==global_place_object.multi_th_spk){var s=["DAY_TP","TP","V_ITI","PLA","PLC","CITY_TP","BL_V","H_SEO","H_VIEW","H_VACATION","FROM_TO_TP"].indexOf(global_place_object.session_page),c=bookingPopunder.convertExtraDataCookieValueToArr();if("multi_chrome_window"in c&&0==c.multi_chrome_window&&(s=-1),!0==bookingPopunder.browser.chrome&&"windows"==bookingPopunder.platform&&-1!=s)return bookingPopunder.Multi({data_an_action:t,browser:"chrome"}),!1;if((!0==bookingPopunder.browser.firefox||!0==bookingPopunder.browser.safari)&&-1!=s)return bookingPopunder.Multi({data_an_action:t,browser:"firefox"}),!1}var p=!!document.getElementById("hotel_source_vrbo")&&document.getElementById("hotel_source_vrbo").checked;if(p=p?"YES":"NO",a){if(win_open_stack.track_action({text:t,source_cookie:a}),"SKYSCAN"==a){bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page});var d=bookingPopunder.prepareSkyscannerUrl();return makeBookingPopunder({redirect_to:d,source_cookie:a,city_id:global_place_object.id,data_an_action:t}),!1}if("G_GUIDE"==a)bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page}),window.pop_clicked=0,makeBookingPopunder({redirect_to:"https://www.getyourguide.com/s/?partner_id=S7RCX99&q="+global_place_object.search_term+"&customerSearch=true&cmp=T1",source_cookie:a,data_an_action:t,city_id:global_place_object.id});else if("MUSEMENT"==a)bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page}),window.pop_clicked=0,global_place_object.search_term||(global_place_object.search_term=global_place_object.name),makeBookingPopunder({redirect_to:"https://www.musement.com/us/search?q="+global_place_object.search_term+"&aid=triphobo&cmp=T2",source_cookie:a,data_an_action:t,city_id:global_place_object.id});else if("H_AIR"==a){bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page}),window.pop_clicked=0;var l=$($(".airbnb-lister ul li")[0]).find("a").attr("href");if("airbnb_link"in global_place_object&&global_place_object.airbnb_link&&(l=global_place_object.airbnb_link),void 0!==l)makeBookingPopunder({pUrl:l,source_cookie:a});else if("US"==n){a="EXP",bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page});var u=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+a+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&action_log="+t+"&session_page="+global_place_object.session_page;makeBookingPopunder({pUrl:u})}else{bookingPopunder.appendCookieValue({source:"SKYSCAN",session_page:global_place_object.session_page});var d=bookingPopunder.prepareSkyscannerUrl();makeBookingPopunder({redirect_to:d,source_cookie:a,city_id:global_place_object.id,data_an_action:t})}}else if("INTENT_MEDIA"==a){bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page});try{window.IntentMedia&&IntentMedia.trigger&&(IntentMedia.trigger("open_exit_unit"),win_open_stack.open_win({url:"IntentMedia"}))}catch(g){}}else if(-1!=["H_VRBO","H_HOMEAWAY","H_VRBO","H_FEWO_DIREKT","H_ABRITEL","P_EX","P_HO"].indexOf(a))bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page}),window.pop_clicked=0,makeBookingPopunder({redirect_to:bookingPopunder.prepareHOMEAWAYBrandUrl({source:a}),source_cookie:a,data_an_action:t,city_id:global_place_object.id});else if("H_AGODA"==a){var k=bookingPopunder.prepareProvideURL({source_cookie:a});bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page}),makeBookingPopunder({redirect_to:k,source_cookie:a,data_an_action:t,city_id:global_place_object.id})}else if("WTF"==a){var k=bookingPopunder.prepareProvideURL({source_cookie:a});bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page}),makeBookingPopunder({redirect_to:k,source_cookie:a,data_an_action:t,city_id:global_place_object.id})}else{bookingPopunder.appendCookieValue({source:a,session_page:global_place_object.session_page});var u=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+a+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&action_log="+t+"&allowed_to_vrbo="+p+"&session_page="+global_place_object.session_page;makeBookingPopunder({pUrl:u+"&"+bookingPopunder.getUtmString()})}}}},planMyTrip:function(e,o){var r={destination_url:!1};$.extend(r,o);var t=bookingPopunder.findTragetObject(e),a=r.destination_url,n=bookingPopunder.source({session_page:global_place_object.session_page,session_page_action:"open_curr_tab"}),s=!1;if((null==document.getElementById("allowed_provider")||document.getElementById("allowed_provider")&&document.getElementById("allowed_provider").checked)&&(s=!0),s||(n="H_BOOKING"),n){win_open_stack.track_action({text:t,source_cookie:n}),bookingPopunder.appendCookieValue({source:n,session_page:global_place_object.session_page}),window.open(a,"_blank");var c=bookingPopunder.prepareProvideURL({source_cookie:n});c&&void 0!==c&&(win_open_stack.open_win({url:c}),window.location.href=c)}else window.location.href=a},itineraryStep2Popunder:function(e){var o=bookingPopunder.convertExtraDataCookieValueToArr();if(void 0!==o.referrer&&o.referrer&&-1!=o.referrer.indexOf("google")){var r=$($("#js_hotel_metasearch_list li")[0]).find("a").attr("href");void 0!==r&&r&&(global_place_object.airbnb_link=r,void 0!==(deep_link=bookingPopunder.prepareAirbnbUrl())&&deep_link&&makeBookingPopunder({pUrl:deep_link,source_cookie:"H_AIR"}))}},prepareProvideURL:function(e){var o=bookingPopunder.base64_encode(window.location.pathname),r={source_cookie:""};$.extend(r,e);var t="",a="";if(r.source_cookie){switch(r.source_cookie){case"H_AIR":var n=bookingPopunder.prepareAirbnbUrl();void 0===n||!1==n?"US"==bookingPopunder.getCookie("country_code_by_ip")&&(r.source_cookie="EXP",t=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+r.source_cookie+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&session_page="+global_place_object.session_page+"&http_referer_url="+o):t=n;break;case"H_EX":case"EXP":case"GAR":case"OLO":case"LRM":case"EBX":case"WTF":case"HC":case"H_VIA":case"H_HC":t=joguru.default_cdn_url+"hotel_metasearch_redirection.php?callback=?&source_cookie="+r.source_cookie+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&session_page="+global_place_object.session_page+"&http_referer_url="+o+"&"+bookingPopunder.getUtmString();break;case"H_BOOKING":case"H_PRI":case"H_AGODA":t=joguru.ssl_base+"content/bookingRedirect?callback=?&source_cookie="+r.source_cookie+"&city_id="+global_place_object.id+"&latitude="+global_place_object.latitude+"&longitude="+global_place_object.longitude+"&session_page="+global_place_object.session_page;break;case"G_GUIDE":a=bookingPopunder.prepareGYG();break;case"SKYSCAN":a=bookingPopunder.prepareSkyscannerUrl();break;case"HOMETOGO":t=joguru.default_cdn_url+"th_spk_comparison.php?source_cookie="+r.source_cookie+"&city_id="+global_place_object.id+"&session_page="+global_place_object.session_page;break;case"H_VRBO":case"H_HOMEAWAY":case"H_VRBO":case"H_FEWO_DIREKT":case"H_ABRITEL":case"P_EX":case"P_HO":a=bookingPopunder.prepareHOMEAWAYBrandUrl({source:r.source_cookie})}""!=a&&(t=joguru.ssl_base+"content/thBookingRedirect?action=blankPage&redirectTo="+encodeURIComponent(a)+"&http_referer_url="+o+"&source_cookie="+r.source_cookie+"&city_id="+global_place_object.id+"&session_page="+global_place_object.session_page)}return t}};try{makeCachedPageFix._addMethod({callback:function(e){window.blank_window=[];var o=bookingPopunder.convertExtraDataCookieValueToArr();void 0!==global_place_object.session_page&&void 0===o.landing_page&&bookingPopunder.appendExtraDataCookieValue({name:"landing_page",value:global_place_object.session_page}),document.referrer&&-1==document.referrer.indexOf("triphobo")&&bookingPopunder.appendExtraDataCookieValue({name:"referrer",value:document.referrer})}})}catch(e){}window.addEventListener("message",function(e){if(void 0!==e&&e&&void 0!==e.data.method&&"open"==e.data.method){var o="scrollbars=1, width=10, height=10, dialog=no, menubar=no, directories=no, left="+(screen.width+window.screenX)+", top="+screen.height+", status=no, toolbar=no",r=window.open(e.data.url,e.data.name,o);if(r)win_open_stack.open_win({url:e.data.url});else{win_open_stack.open_win({url:e.data.url,win_block:!0,multi_win_block:!0}),bookingPopunder.deleteCookieValue({source:e.data.source_cookie}),bookingPopunder.appendExtraDataCookieValue({name:"multi_chrome_window",value:0});var t={};t.text="source:"+e.data.source_cookie,t.page="popunder-block",add_monitor_record(t)}setTimeout(function(){try{r.resizeTo(1,0),r.moveTo(9999,9999)}catch(e){}},1)}});